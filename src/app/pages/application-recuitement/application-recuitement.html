<div class="content">
  <div class="container-1440">
    <div class="page-header">
      <div class="has-background container-full"
        style="background-image: url('https://theangarabucket.s3.eu-north-1.amazonaws.com/public/job-applications/20251012_064544_actualite_s3.jpg')">
        <img
          src="/https://theangarabucket.s3.eu-north-1.amazonaws.com/public/job-applications/20251012_064544_actualite_s3.jpg"
          alt="">
      </div>
      <div class="page-header-inner">
        <div class="page-title" *ngIf="jobOffer && !error">
          <h1 style="text-transform: uppercase;">
            {{ 'recruitment.offer' | translate }} : {{jobOffer.title}}
          </h1>
        </div>
        <div class="page-sub-title">
          <div>
            <span class="has-border-l-t d-block"></span>
          </div>
          <div>
            <p>
              {{ 'recruitment.offerDescription' | translate }}
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="container-1440">
    <div class="alert alert-danger text-center">
      <h4>{{ 'common.error' | translate }}</h4>
      <p>{{ error }}</p>
      <div class="mt-3">
        <button (click)="loadJobOffer()" class="btn btn-primary me-2">{{ 'common.retry' | translate }}</button>
        <button (click)="goBack()" class="btn btn-secondary">{{ 'common.backToList' | translate }}</button>
      </div>
    </div>
  </div>

  <!-- Job Offer Details -->
  <div *ngIf="jobOffer && !error" class="container-1440">
    <div class="row">
      <!-- Left Column - Job Details -->
      <div class="col-lg-8 container">
        <div class="container-1440">
          <div class="section-textriche">
            <h2 class="title-h2">{{ 'recruitment.mainMissions' | translate }}</h2>
            <br>
            <div [innerHTML]="jobOffer.main_mission"></div>
          </div>
          <div class="section-textriche" *ngIf="hasContent(jobOffer.responsibilities)">
            <h2 class="title-h2">{{ 'recruitment.responsibilities' | translate }}</h2>
            <br>
            <div [innerHTML]="jobOffer.responsibilities"></div>
          </div>
          <div class="section-textriche" *ngIf="hasContent(jobOffer.competencies)">
            <h2 class="title-h2">{{ 'recruitment.requiredSkills' | translate }}</h2>
            <br>
            <div [innerHTML]="jobOffer.competencies"></div>
          </div>

          <div class="section-textriche" *ngIf="hasContent(jobOffer.profile)">
            <h2 class="title-h2">{{ 'recruitment.desiredProfile' | translate }}</h2>
            <br>
            <div [innerHTML]="jobOffer.profile"></div>
          </div>
          <div class="section-textriche" *ngIf="hasContent(jobOffer.benefits)">
            <h2 class="title-h2">{{ 'recruitment.benefits' | translate }}</h2>
            <br>
            <div [innerHTML]="jobOffer.benefits"></div>
          </div>

          <div class="section-textriche" *ngIf="hasContent(jobOffer.conditions)">
            <h2 class="title-h2">{{ 'recruitment.conditions' | translate }}</h2>
            <br>
            <div [innerHTML]="jobOffer.conditions"></div>
          </div>
          <div class="section-textriche" *ngIf="jobOffer.attachment && jobOffer.attachment.length > 0">
            <h2 class="title-h2">{{ 'recruitment.requiredDocuments' | translate }}</h2>
            <br>
            <ul>
              <li *ngFor="let attachment of jobOffer.attachment">
                {{ translateAttachment(attachment) }}
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Right Column - Application Form -->
      <div class="col-lg-4">
        <div class="application-card">
          <h3>{{ 'recruitment.applyToOffer' | translate }}</h3>

          <!-- Job Summary -->
          <div class="job-summary">
            <h4>{{ 'recruitment.jobSummary' | translate }}</h4>
            <div class="summary-item">
              <strong>{{ 'recruitment.reference' | translate }}:</strong> {{ jobOffer.reference }}
            </div>
            <div class="summary-item">
              <strong>{{ 'recruitment.location' | translate }}:</strong> {{ jobOffer.location }}
            </div>
            <div class="summary-item">
              <strong>{{ 'recruitment.contractType' | translate }}:</strong> {{ jobOffer.contract_type }}
            </div>
            <div class="summary-item">
              <strong>{{ 'recruitment.hoursPerWeek' | translate }}:</strong> {{ jobOffer.weekly_hours }}h
            </div>
            <div class="summary-item">
              <strong>{{ 'recruitment.salary' | translate }}:</strong> {{ formatSalary(jobOffer.salary,
              jobOffer.currency) }}
            </div>
            <div class="summary-item">
              <strong>{{ 'recruitment.applicationFee' | translate }}:</strong> {{ formatSalary(jobOffer.submission_fee,
              jobOffer.currency) }}
            </div>
            <div class="summary-item">
              <strong>{{ 'recruitment.deadline' | translate }}:</strong> {{ formatDate(jobOffer.submission_deadline) }}
            </div>
          </div>

          <!-- Application Button -->
          <div class="application-actions">
            <button (click)="applyToJob()" class="btn btn-primary btn-lg w-100"
              [disabled]="isApplicationDeadlinePassed()">
              {{ 'recruitment.apply' | translate }}
            </button>

            <div *ngIf="isApplicationDeadlinePassed()" class="alert alert-warning mt-3">
              <i class="fas fa-exclamation-triangle me-2"></i>
              {{ 'recruitment.deadlinePassed' | translate }}
            </div>
          </div>

          <!-- Contact Info -->
          <div class="contact-info">
            <h4>{{ 'recruitment.needHelp' | translate }}</h4>
            <p>{{ 'recruitment.contactUs' | translate }}</p>
            <ul>
              <li>contact@lafaom-mao.org</li>
              <li>+4942151603476</li>
              <li>Ziguinchor, Sénégal</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>